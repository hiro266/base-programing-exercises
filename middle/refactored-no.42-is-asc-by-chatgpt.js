// No. 42 å°ã•ã„é †?
// æ•´æ•°å€¤ã‚’3ã¤å…¥åŠ›ã•ã›ã€ãã‚Œã‚‰ã®å€¤ãŒå°ã•ã„é †ï¼ˆç­‰ã—ãã¦ã‚‚ã‚ˆã„ï¼‰ã«ä¸¦ã‚“ã§ã„ã‚‹ã‹åˆ¤å®šã—ã€
// å°ã•ã„é †ã«ä¸¦ã‚“ã§ã„ã‚‹å ´åˆã¯OKã€ãã†ãªã£ã¦ã„ãªã„å ´åˆã¯NGã¨è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã›ã‚ˆã€‚

// ğŸ’¡PointğŸ’¡
// - æ˜‡é †åˆ¤å®šã®æ–¹æ³•ã‚’ãƒ«ãƒ¼ãƒ—ã«ã‚ˆã‚‹æ¯”è¼ƒã«å¤‰æ›´
//   - æ˜‡é †ã‹ã‚’ç¢ºèªã™ã‚‹ã ã‘ãªã‚‰ã€ã‚½ãƒ¼ãƒˆã—ãŸã‚ŠJSONå¤‰æ›ã™ã‚‹ã®ã¯ä¸è¦ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«æ‚ªå½±éŸ¿
//   - 1. è¨ˆç®—é‡ã®å¢—åŠ : ã‚½ãƒ¼ãƒˆå‡¦ç†ã¨éš£æ¥è¦ç´ ã®æ¯”è¼ƒã ã¨éš£æ¥è¦ç´ ã®æ¯”è¼ƒã®æ–¹ãŒåŠ¹ç‡çš„
//   - 2. ç„¡é§„ãªãƒªã‚½ãƒ¼ã‚¹æ¶ˆè²»: é…åˆ—ã‚µã‚¤ã‚ºãŒå¤§ãã„å ´åˆã€ã‚½ãƒ¼ãƒˆã‚„ JSONå¤‰æ›ã«ã‹ã‹ã‚‹è¨ˆç®—è³‡æºï¼ˆCPUæ™‚é–“ã‚„ãƒ¡ãƒ¢ãƒªï¼‰ãŒç„¡é§„ã«æ¶ˆè²»
// - ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã®åŒºåˆ¥
//   - ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°numbers ã¨ isAscã®å¼•æ•°ã¨ã—ã¦æ¸¡ã™numbersã‚’åŒºåˆ¥ã™ã‚‹

const { rl, isNotInteger } = require("../utils/utils");

const MAX_INPUT = 3;
const numbers = [];

const isAsc = (arr) => {
  return arr.every(
    (value, index, array) => index === 0 || array[index - 1] <= value
  );
  // é…åˆ—å…¨ã¦ã®è¦ç´ ã«å¯¾ã—ã¦å®Ÿè¡Œã—ã€å…¨ã¦trueãªã‚‰trueã‚’è¿”ã—ã€ä¸€ã¤ã§ã‚‚falseãªã‚‰falseã‚’è¿”ã™
  // [1, 2, 3]
  // 1. value = 1, index = 0, array = [1,2,3]
  //   index === 0 ã«å½“ã¦ã¯ã¾ã‚‹ãŸã‚ true
  // 2. value = 2, index = 1, array = [1,2,3]
  //   array[1 - 1] ãŒ 2ä»¥ä¸‹
  //   array[0] = 1
  //   1 ãŒ 2ä»¥ä¸‹ã«è©²å½“ã™ã‚‹ãŸã‚ true
  // 3. value = 3, index = 2, array = [1,2,3]
  //   array[2 - 1] ãŒ 3ä»¥ä¸‹
  //   array[1] = 2
  //   2 ãŒ 3ä»¥ä¸‹ã«è©²å½“ã™ã‚‹ãŸã‚ true
  // 4. å…¨ã¦ã®è¦ç´ ãŒtrueã®ãŸã‚æœ€çµ‚çš„ãªè¿”å€¤ãŒtrueã«ãªã‚‹
};

rl.prompt();

const processInput = (input) => {
  const number = Number(input.trim());

  if (isNotInteger(number)) {
    console.log("æ•´æ•°ã‚’å…¥åŠ›ã—ã¦ä¸‹ã•ã„");
    rl.prompt();
    return;
  }

  numbers.push(number);

  if (numbers.length < MAX_INPUT) {
    rl.prompt();
  } else {
    console.log(isAsc(numbers) ? "OK" : "NG");
    rl.close();
  }
};

rl.on("line", processInput);
